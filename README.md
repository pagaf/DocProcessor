# DocProcessor

## Описание

DocProcessor — это сервис для обработки обновлений документов, поступающих в произвольном порядке. Сервис обеспечивает корректное формирование итоговых документов с учетом их версий и обновлений.

## Основные функции

- Обработка документов, поступающих в произвольном порядке.
- Обработка дублирующихся сообщений.
- Формирование итоговых документов с исправленными полями по следующим правилам:
  - Поля `Text` и `FetchTime` должны быть такими, какими были в документе с наибольшим `FetchTime`.
  - Поле `PubDate` должно быть таким, каким было у сообщения с наименьшим `FetchTime`.
  - Поле `FirstFetchTime` должно быть равно минимальному значению `FetchTime`.

## Структура данных

### Сообщение TDocument

```protobuf
message TDocument {
    string Url = 1;           // URL документа, его уникальный идентификатор
    uint64 PubDate = 2;       // время заявляемой публикации документа
    uint64 FetchTime = 3;     // время получения данного обновления документа, может рассматриваться как идентификатор версии
    string Text = 4;          // текст документа
    uint64 FirstFetchTime = 5; // изначально отсутствует, необходимо заполнить
}
```

## Пример

```python
from main import Processor, TDocument

# Инициализация процессора
processor = Processor("database.db")

# Обработка документа
doc = TDocument(url="http://example.com/doc1", pub_date=10, fetch_time=20, text="Первый вариант")
result = processor.process(doc)

print(result)
```
